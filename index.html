<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <link rel="icon" type="image/jpg" href="logo.png">
        <title>ChatMagician</title>
    </head>
    <body>
        <!-- Drawing tab toggle (fixed left edge) -->
        <button id="drawing_tab_toggle" class="side_tab left_tab" style="display: none;" title="Narzƒôdzia rysowania">
            <span class="tab_label">Rysuj</span>
        </button>
        
        <!-- Drawing tools sidebar (fixed left edge) -->
        <div id="drawing_sidebar" class="sidebar_hidden">
            <div class="tool_grid">
                <button class="tool_btn" data-tool="pencil" title="O≈Ç√≥wek">‚úèÔ∏è</button>
                <button class="tool_btn" data-tool="brush" title="Pƒôdzel">üñåÔ∏è</button>
                <button class="tool_btn" data-tool="eraser" title="Gumka">üßΩ</button>
                <button class="tool_btn" data-tool="line" title="Linia">üìè</button>
                <button class="tool_btn" data-tool="rectangle" title="ProstokƒÖt">‚¨ú</button>
                <button class="tool_btn" data-tool="circle" title="Ko≈Ço">‚≠ï</button>
                <button class="tool_btn" data-tool="arrow" title="Strza≈Çka">‚û°Ô∏è</button>
            </div>
            <div class="tool_options_compact">
                <input type="color" id="drawing_color" value="#ff0000" title="Kolor">
                <div class="size_control">
                    <input type="range" id="drawing_size" min="1" max="30" value="3" title="Grubo≈õƒá">
                    <span id="drawing_size_label">3</span>
                </div>
                <label class="fill_toggle" title="Wype≈Çniony">
                    <input type="checkbox" id="shape_filled"><span>‚¨õ</span>
                </label>
            </div>
            <button id="clear_drawing" class="clear_btn_compact" title="Wyczy≈õƒá warstwƒô">üóëÔ∏è</button>
        </div>
        
        <!-- Layers tab toggle (fixed left edge) -->
        <button id="layers_tab_toggle" class="side_tab left_tab" style="display: none;" title="Warstwy">
            <span class="tab_label">Warstwy</span>
        </button>
        
        <!-- Layers sidebar (fixed left edge) -->
        <div id="layers_sidebar" class="sidebar_hidden">
            <div id="layers_container">
                <div id="layers_list"></div>
                <button id="add_layer_btn" class="add_layer_btn">+ Nowa</button>
            </div>
        </div>
        
        <!-- Navigation icons -->
        <div class="nav_sidebar">
            <a href="index.html" class="nav_icon active" title="Edytor tekstu">
                <span>üìù</span>
                <small>Tekst</small>
            </a>
            <a href="gif.html" class="nav_icon" title="Kreator GIF">
                <span>üéûÔ∏è</span>
                <small>GIF</small>
            </a>
        </div>
        
        <div id="update_banner" class="update_banner">
            <span class="banner_text">üí° <b>Wskaz√≥wka:</b> Naci≈õnij <b>F5</b> przed ka≈ºdƒÖ sesjƒÖ, aby upewniƒá siƒô, ≈ºe masz najnowszƒÖ wersjƒô strony. Najed≈∫ na ikonƒô <b>‚ÑπÔ∏è</b> w lewym g√≥rnym rogu, aby zobaczyƒá wszystkie skr√≥ty klawiszowe.</span>
            <button class="banner_close" onclick="document.getElementById('update_banner').style.display='none'; document.querySelector('.info_icon').style.top='10px';">√ó</button>
        </div>
        <div id="info_icon" class="info_icon">
            ‚ÑπÔ∏è
            <div class="tooltip">
                <div class="tooltip_title">Formatowanie tekstu</div>
                <div class="tooltip_item"><span class="color_box" style="background-color: #fbf724;"></span> Zawiera "(telefon)" ‚Üí ≈ª√≥≈Çty</div>
                <div class="tooltip_item"><span class="color_box" style="background-color: #56d64b;"></span> Zawiera "$number" ‚Üí Zielony</div>
                <div class="tooltip_item"><span class="color_box" style="background-color: #979aed;"></span> Zaczyna siƒô od "**" ‚Üí Fioletowy</div>
                <div class="tooltip_item"><span class="color_box" style="background-color: #c2a3da;"></span> Zaczyna siƒô od "*" ‚Üí R√≥≈ºowy</div>
                <div class="tooltip_item"><span class="color_box" style="background-color: #f1f1f1;"></span> Zwyk≈Çy tekst ‚Üí Bia≈Çy</div>
                <div class="tooltip_title" style="margin-top: 12px;">Skr√≥ty klawiszowe</div>
                <div class="tooltip_item">üñ±Ô∏è <b>LPM</b> na tek≈õcie ‚Üí PrzeciƒÖgnij tekst</div>
                <div class="tooltip_item">üñ±Ô∏è <b>PPM</b> lub <b>Shift + LPM</b> ‚Üí PrzeciƒÖgnij obraz</div>
                <div class="tooltip_item">üñ±Ô∏è <b>Ctrl + LPM</b> + przeciƒÖgnij ‚Üí Kadruj obraz (prostokƒÖt)</div>
                <div class="tooltip_item">üñ±Ô∏è <b>Ctrl + Shift + LPM</b> + przeciƒÖgnij ‚Üí Kadruj pod kƒÖtem</div>
                <div class="tooltip_item">üñ±Ô∏è <b>Scroll</b> podczas kadrowania pod kƒÖtem ‚Üí Zmie≈Ñ stronƒô ciƒôcia</div>
                <div class="tooltip_item">üñ±Ô∏è <b>Alt + Scroll</b> ‚Üí Skaluj obraz</div>
                <div class="tooltip_item">‚å®Ô∏è <b>Ctrl + Z</b> ‚Üí Cofnij ostatniƒÖ zmianƒô</div>
                <div class="tooltip_title" style="margin-top: 12px;">Rysowanie</div>
                <div class="tooltip_item">üé® Wybierz narzƒôdzie z paska bocznego</div>
                <div class="tooltip_item">üñ±Ô∏è <b>LPM</b> na p≈Ç√≥tnie ‚Üí Rysuj na wybranej warstwie</div>
                <div class="tooltip_item">üëÅÔ∏è Kliknij oko ‚Üí Poka≈º/ukryj warstwƒô</div>
                <div class="tooltip_item">‚å®Ô∏è <b>Ctrl + Z</b> (z narzƒôdziem) ‚Üí Cofnij rysunek</div>
                <div class="tooltip_item">‚å®Ô∏è <b>Ctrl + Shift + Z</b> ‚Üí Przywr√≥ƒá cofniƒôty</div>
            </div>
        </div>
        <div class="main">
            <div id="chat_editor">
                <center>
                    <!-- Step 1: Text Input -->
                    <div class="ui_section">
                        <div class="section_header">
                            <span class="step_number">1</span>
                            <span class="section_title">Wpisz tekst</span>
                        </div>
                        <div id="input_container">
                            <textarea id="user_input" placeholder="Wpisz swojƒÖ wiadomo≈õƒá tutaj..."></textarea>
                        </div>
                        <div id="text_blocks_container" style="display:none;">
                            <div id="text_blocks_list"></div>
                            <button id="add_text_block">+ Dodaj tekst</button>
                        </div>
                        
                        <!-- Text Formatting (inline) -->
                        <div id="settings_container" class="text_formatting_inline">
                            <div class="setting_group">
                                <span class="setting_label">Czcionka</span>
                                <div class="setting_controls">
                                    <select id="font_family">
                                        <option value="Arial">Arial</option>
                                        <option value="Verdana">Verdana</option>
                                        <option value="Times New Roman">Times New Roman</option>
                                        <option value="Courier New">Courier New</option>
                                        <option value="Georgia">Georgia</option>
                                        <option value="Trebuchet MS">Trebuchet MS</option>
                                        <option value="Comic Sans MS">Comic Sans MS</option>
                                        <option value="Impact">Impact</option>
                                        <option value="Tahoma">Tahoma</option>
                                    </select>
                                    <input type="number" id="font_size" min="8" max="48" value="12" title="Rozmiar czcionki">
                                    <span id="font_size_display">12px</span>
                                </div>
                            </div>
                            <div class="setting_group">
                                <span class="setting_label">Kolory</span>
                                <div class="setting_controls">
                                    <div class="color_picker_group">
                                        <input type="color" id="custom_color" value="#a6a6a6" title="Kolor tekstu">
                                        <small>Tekst</small>
                                    </div>
                                    <div class="color_picker_group">
                                        <input type="color" id="bg_color" value="#161616" title="T≈Ço tekstu">
                                        <small>T≈Ço</small>
                                    </div>
                                </div>
                            </div>
                            <div class="setting_group setting_group_narrow">
                                <span class="setting_label">Opcje</span>
                                <div class="setting_controls checkbox_column">
                                    <label for="process_text" title="Odwr√≥ƒá kolejno≈õƒá i usu≈Ñ daty (dla log√≥w z chatu)">
                                        <input type="checkbox" id="process_text">
                                        Logi z chatu
                                    </label>
                                    <label for="text_bg_enabled" title="Poka≈º t≈Ço za tekstem">
                                        <input type="checkbox" id="text_bg_enabled">
                                        T≈Ço tekstu
                                    </label>
                                    <label for="multi_text_enabled" title="Dodaj wiele blok√≥w tekstu">
                                        <input type="checkbox" id="multi_text_enabled">
                                        Wiele tekst√≥w
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Step 2: Preview -->
                    <div class="ui_section preview_section">
                        <div class="section_header">
                            <span class="step_number">2</span>
                            <span class="section_title">PodglƒÖd</span>
                            <div class="header_controls">
                                <label class="drawing_toggle" id="effects_toggle_container" style="display: none;">
                                    <input type="checkbox" id="effects_mode_toggle">
                                    <span class="toggle_slider"></span>
                                    <span class="toggle_label">Efekty</span>
                                </label>
                                <div id="image_add_container" class="header_image_controls">
                                    <input type="file" id="bg_image" accept="image/*" style="display:none;">
                                    <button id="bg_image_btn" class="header_btn">+ Obraz</button>
                                </div>
                            </div>
                        </div>
                        <div id="images_container" style="display:none;">
                            <div id="images_list"></div>
                            <div id="image_size_controls">
                                <div class="controls_row">
                                    <div class="control_group">
                                        <label>Rozmiar:</label>
                                        <input type="number" id="image_width" min="100" max="4000" value="800">
                                        <span>√ó</span>
                                        <input type="number" id="image_height" min="100" max="4000" value="600">
                                        <button id="apply_size" class="small_btn">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="preview_wrapper">
                            <div id="preview_container">
                                <canvas id="preview_canvas"></canvas>
                            </div>
                            
                            <!-- Effects sidebar (right) -->
                            <div id="effects_sidebar" style="display: none;">
                                <div class="sidebar_title">Efekty</div>
                                <div class="effect-row-vertical">
                                    <label>Rozmycie: <span id="blur_value">0</span>px</label>
                                    <input type="range" id="effect_blur" min="0" max="20" value="0" step="1">
                                </div>
                                <div class="effect-row-vertical">
                                    <label>Kontrast: <span id="contrast_value">100</span>%</label>
                                    <input type="range" id="effect_contrast" min="0" max="200" value="100" step="5">
                                </div>
                                <div class="effect-row-vertical">
                                    <label>Nasycenie: <span id="saturation_value">100</span>%</label>
                                    <input type="range" id="effect_saturation" min="0" max="200" value="100" step="5">
                                </div>
                                <div class="effect-row-vertical">
                                    <label>Jasno≈õƒá: <span id="brightness_value">100</span>%</label>
                                    <input type="range" id="effect_brightness" min="0" max="200" value="100" step="5">
                                </div>
                                <div class="effect-row-vertical">
                                    <label>Ziarno: <span id="grain_value">0</span>%</label>
                                    <input type="range" id="effect_grain" min="0" max="100" value="0" step="5">
                                </div>
                                <div class="effect-row-vertical">
                                    <label>Rozmycie ziarna: <span id="grain_blur_value">0</span>px</label>
                                    <input type="range" id="effect_grain_blur" min="0" max="10" value="0" step="1">
                                </div>
                                <div class="effect-row-vertical">
                                    <label>Przezroczysto≈õƒá ziarna: <span id="grain_alpha_value">50</span>%</label>
                                    <input type="range" id="effect_grain_alpha" min="0" max="100" value="50" step="1">
                                </div>
                                <button id="reset_effects" class="clear_btn">‚Ü∫ Resetuj</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Step 3: Download -->
                    <div class="ui_section download_section">
                        <div class="section_header">
                            <span class="step_number">3</span>
                            <span class="section_title">Pobierz</span>
                        </div>
                        <div id="button_container">
                            <button id="dwnl_trs" class="download_btn" title="PNG z przezroczystym t≈Çem">Przezroczysty</button>
                            <button id="dwnl_bcg" class="download_btn" title="PNG z kolorowym t≈Çem">Z t≈Çem</button>
                            <button id="dwnl_img" class="download_btn primary_download" style="display:none;" title="PNG z obrazem i tekstem">Z obrazem</button>
                        </div>
                    </div>
                    <div id="chat_container">
                        <div id="chat_messages">

                        </div>
                    </div>
                </center>
                
            </div>
        </div>

        <script>
            // Toggle collapsible sections
            function toggleSection(header) {
                const section = header.parentElement;
                section.classList.toggle('collapsed');
            }
        </script>
        <script src="script.js"></script>
    </body>
</html>